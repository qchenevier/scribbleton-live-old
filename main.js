!function(e){function t(t){for(var i,o,s=t[0],l=t[1],u=t[2],f=0,d=[];f<s.length;f++)o=s[f],Object.prototype.hasOwnProperty.call(r,o)&&r[o]&&d.push(r[o][0]),r[o]=0;for(i in l)Object.prototype.hasOwnProperty.call(l,i)&&(e[i]=l[i]);for(c&&c(t);d.length;)d.shift()();return a.push.apply(a,u||[]),n()}function n(){for(var e,t=0;t<a.length;t++){for(var n=a[t],i=!0,s=1;s<n.length;s++){var l=n[s];0!==r[l]&&(i=!1)}i&&(a.splice(t--,1),e=o(o.s=n[0]))}return e}var i={},r={0:0},a=[];function o(t){if(i[t])return i[t].exports;var n=i[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=e,o.c=i,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)o.d(n,i,function(t){return e[t]}.bind(null,i));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="";var s=window.webpackJsonp=window.webpackJsonp||[],l=s.push.bind(s);s.push=t,s=s.slice();for(var u=0;u<s.length;u++)t(s[u]);var c=l;a.push([38,1]),n()}([,,,,,,,,,function(e,t,n){var i=n(21);"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);(0,n(7).default)("77f9fee7",i,!1,{})},function(e,t,n){var i=n(30);"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);(0,n(7).default)("4cd6b2c9",i,!1,{})},function(e,t,n){var i=n(32);"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);(0,n(7).default)("5b2eb30a",i,!1,{})},function(e,t,n){var i=n(35);"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);(0,n(7).default)("03ada772",i,!1,{})},,,,,,,,function(e,t,n){"use strict";var i=n(9);n.n(i).a},function(e,t,n){(t=n(6)(!1)).push([e.i,"\n.play {\n  color: green;\n}\n.pause {\n  color: grey;\n}\n.rendering {\n  color: red;\n}\n",""]),e.exports=t},,,,,,,,function(e,t,n){"use strict";var i=n(10);n.n(i).a},function(e,t,n){(t=n(6)(!1)).push([e.i,"\n[data-v-64cc84e8] .CodeMirror {\n  font-size: 12;\n  height: var(--height);\n  direction: ltr;\n  background: var(--background);\n  font-family: Consolas, Menlo, Monaco, Lucida Console, Liberation Mono,\n    DejaVu Sans Mono, Bitstream Vera Sans Mono, Courier New, monospace, serif;\n}\n[data-v-64cc84e8] .highlighted {\n  font-weight: bold;\n  background-color: rgba(0, 100, 255, 0.2);\n}\n",""]),e.exports=t},function(e,t,n){"use strict";var i=n(11);n.n(i).a},function(e,t,n){(t=n(6)(!1)).push([e.i,"\n.column[data-v-74eb68cc] {\n  float: left;\n  width: 260;\n}\n",""]),e.exports=t},,function(e,t,n){"use strict";var i=n(12);n.n(i).a},function(e,t,n){(t=n(6)(!1)).push([e.i,'\n#app {\n  font-family: "Roboto", sans-serif;\n  font-size: 14;\n}\n.column {\n  float: left;\n  width: 260;\n}\n.row:after {\n  content: "";\n  display: table;\n  clear: both;\n}\n',""]),e.exports=t},,,function(e,t,n){"use strict";n.r(t);var i=n(19),r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("h1",[e._v("Scribbletune Maker")]),e._v(" "),n("div",{staticClass:"row"},[n("div",{staticClass:"column"},[n("SaveLoadJson",{model:{value:e.scribbletuneMakerSession,callback:function(t){e.scribbletuneMakerSession=t},expression:"scribbletuneMakerSession"}}),e._v(" "),n("Oscilloscope"),e._v(" "),n("PlayPauseButton",{attrs:{rendering:e.isRendering},model:{value:e.isPlaying,callback:function(t){e.isPlaying=t},expression:"isPlaying"}}),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.autoreplay,expression:"autoreplay"}],attrs:{type:"checkbox",id:"checkbox-replay"},domProps:{checked:Array.isArray(e.autoreplay)?e._i(e.autoreplay,null)>-1:e.autoreplay},on:{change:function(t){var n=e.autoreplay,i=t.target,r=!!i.checked;if(Array.isArray(n)){var a=e._i(n,null);i.checked?a<0&&(e.autoreplay=n.concat([null])):a>-1&&(e.autoreplay=n.slice(0,a).concat(n.slice(a+1)))}else e.autoreplay=r}}}),e._v(" "),n("label",{attrs:{for:"checkbox-replay"}},[e._v("Autoreplay")]),e._v(" "),n("button",{on:{click:function(){return e.addChannel()}}},[e._v("\n        Add channel\n      ")])],1),e._v(" "),n("div",{staticClass:"column"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.isPlayPattern,expression:"isPlayPattern"}],attrs:{type:"checkbox",id:"checkbox-"},domProps:{checked:Array.isArray(e.isPlayPattern)?e._i(e.isPlayPattern,null)>-1:e.isPlayPattern},on:{change:function(t){var n=e.isPlayPattern,i=t.target,r=!!i.checked;if(Array.isArray(n)){var a=e._i(n,null);i.checked?a<0&&(e.isPlayPattern=n.concat([null])):a>-1&&(e.isPlayPattern=n.slice(0,a).concat(n.slice(a+1)))}else e.isPlayPattern=r}}}),e._v(" "),n("label",{attrs:{for:"checkbox"}},[e._v("Play "+e._s(e.isPlayPattern?"pattern":"row"))]),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.rowNumberToPlay,expression:"rowNumberToPlay"}],attrs:{disabled:e.isPlayPattern},domProps:{value:e.rowNumberToPlay},on:{input:function(t){t.target.composing||(e.rowNumberToPlay=t.target.value)}}}),e._v(" "),n("PlayPattern",{key:e.playPatternId,model:{value:e.playPattern,callback:function(t){e.playPattern=t},expression:"playPattern"}})],1)]),e._v(" "),n("div",{staticClass:"row"},e._l(e.channels,(function(t,i){return n("div",[n("Channel",{key:"channel-"+i,on:{close:e.removeChannel},model:{value:e.channels[i],callback:function(t){e.$set(e.channels,i,t)},expression:"channels[id]"}})],1)})),0)])};r._withStripped=!0;var a=function(){var e=this.$createElement;return(this._self._c||e)("button",{class:this.rendering?"rendering":this.value?"pause":"play",attrs:{disabled:this.rendering},on:{click:this.toggle}},[this._v("\n  "+this._s(this.rendering?"Rendering":this.value?"Pause":"Play")+"\n")])};a._withStripped=!0;var o={props:{value:{default:!1},rendering:{default:!1}},methods:{toggle:function(){this.$emit("input",!this.value)}}},s=(n(20),n(2)),l=Object(s.a)(o,a,[],!1,null,null,null);l.options.__file="src/PlayPauseButton.vue";var u=l.exports,c=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"column"},[n("div",[n("input",{directives:[{name:"model",rawName:"v-model.trim.lazy",value:e.input.idx,expression:"input.idx",modifiers:{trim:!0,lazy:!0}}],domProps:{value:e.input.idx},on:{change:function(t){e.$set(e.input,"idx",t.target.value.trim())},blur:function(t){return e.$forceUpdate()}}}),e._v(" "),n("button",{on:{click:function(t){return e.$emit("close",e.id)}}},[e._v("Close")])]),e._v(" "),n("div",[n("button",{on:{click:function(){return e.addEffect()}}},[e._v("Add effect")]),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.input.offlineRendering,expression:"input.offlineRendering"}],attrs:{type:"checkbox",id:"checkbox"},domProps:{checked:Array.isArray(e.input.offlineRendering)?e._i(e.input.offlineRendering,null)>-1:e.input.offlineRendering},on:{change:function(t){var n=e.input.offlineRendering,i=t.target,r=!!i.checked;if(Array.isArray(n)){var a=e._i(n,null);i.checked?a<0&&e.$set(e.input,"offlineRendering",n.concat([null])):a>-1&&e.$set(e.input,"offlineRendering",n.slice(0,a).concat(n.slice(a+1)))}else e.$set(e.input,"offlineRendering",r)}}}),e._v(" "),n("label",{attrs:{for:"checkbox"}},[e._v("Prerender")])]),e._v(" "),n("Clip",{key:"clip-"+e.id,model:{value:e.input.clips,callback:function(t){e.$set(e.input,"clips",t)},expression:"input.clips"}}),e._v(" "),n("Instrument",{key:"instrument-"+e.id,attrs:{names:e.instrumentNames},model:{value:e.input.instrument,callback:function(t){e.$set(e.input,"instrument",t)},expression:"input.instrument"}}),e._v(" "),e._l(e.input.effects,(function(t,i){return n("Instrument",{key:"effect-"+i,attrs:{names:e.effectNames,closeButton:!0,height:"100px"},on:{close:e.removeEffect},model:{value:e.input.effects[i],callback:function(t){e.$set(e.input.effects,i,t)},expression:"input.effects[idEffect]"}})}))],2)};c._withStripped=!0;var f=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("select",{directives:[{name:"model",rawName:"v-model",value:e.input.name,expression:"input.name"}],on:{change:function(t){var n=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.$set(e.input,"name",t.target.multiple?n:n[0])}}},e._l(e.names,(function(t){return n("option",{domProps:{value:t}},[e._v(e._s(t)+" ")])})),0),e._v(" "),e.closeButton?n("button",{on:{click:function(t){return e.$emit("close",e.id)}}},[e._v("Close")]):e._e(),e._v(" "),n("ParamsEditor",{key:"instrument-editor-"+e.id,attrs:{height:e.height,defaultValue:e.defaultValue},model:{value:e.input.params,callback:function(t){e.$set(e.input,"params",t)},expression:"input.params"}})],1)};f._withStripped=!0;var d=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("codemirror",{key:"editor-"+e.id,ref:"editor-"+e.id,style:{height:e.height,background:e.background},attrs:{options:e.editorOptions},on:{focus:function(t){e.background="#0064FF0C"},blur:function(t){e.$emit("input",e.YAML.parse(e.input)),e.background="#FFFFFF"}},model:{value:e.input,callback:function(t){e.input=t},expression:"input"}})],1)};d._withStripped=!0;var p=n(15),h=(n(22),n(24),n(8)),v=n.n(h),m=n(16),y={components:{codemirror:p.codemirror},props:{value:{},editorOptions:{default:function(){return{tabSize:2,mode:"text/yaml",dragDrop:!1,line:!0}}},defaultValue:void 0,height:{default:"300px"}},data:function(){return{YAML:v.a,input:v.a.stringify(this.value),background:"#FFFFFF",highlightedLinesNumbers:[]}},computed:{id:function(){return this.$vnode.key.split("-")[1]}},methods:{computeHighlightedLinesNumbers:function(){var e=[],t=0;this.defaultValue&&m.diffLines(v.a.stringify(this.defaultValue),this.input).filter((function(e){return!e.removed})).forEach((function(n){if(n.added)for(var i=0;i<n.count;i++)e.push(i+t);t+=n.count})),this.highlightedLinesNumbers=e}},created:function(){this.computeHighlightedLinesNumbers()},watch:{value:function(){this.input=v.a.stringify(this.value),this.computeHighlightedLinesNumbers()},highlightedLinesNumbers:{handler:function(e,t){var n=this;null==t||t.forEach((function(e){return n.$refs["editor-".concat(n.id)].cminstance.removeLineClass(e,"wrap","highlighted")})),e.forEach((function(e){return n.$refs["editor-".concat(n.id)].cminstance.addLineClass(e,"wrap","highlighted")}))}}}},P=(n(29),Object(s.a)(y,d,[],!1,null,"64cc84e8",null));P.options.__file="src/ParamsEditor.vue";var g=P.exports,b={components:{ParamsEditor:g},props:{value:void 0,names:void 0,height:{default:"260px"},closeButton:{default:!1}},data:function(){return{input:this.value,defaultValue:""}},computed:{id:function(){return this.$vnode.key.split("-")[1]},cssParams:function(){return{fontSize:"12px",height:this.height,border:"1px solid #eee"}}},created:function(){this.input||(this.input={name:this.names[0],params:(new Tone[this.names[0]]).get()},this.defaultValue=this.input.params)},mounted:function(){this.$emit("input",this.input)},watch:{"input.name":{handler:function(){this.input.params=(new Tone[this.input.name]).get(),this.defaultValue=this.input.params}},input:{deep:!0,handler:function(){this.$emit("input",this.input)}}}},_=Object(s.a)(b,f,[],!1,null,"a0a9ddc0",null);_.options.__file="src/Instrument.vue";var x=_.exports,w=function(){var e=this,t=e.$createElement;return(e._self._c||t)("ParamsEditor",{key:"clips-"+e.id,attrs:{value:e.value,height:"100px"},on:{input:function(t){return e.$emit("input",t)}}})};w._withStripped=!0;var k={components:{ParamsEditor:g},props:{value:{default:function(){return[{notes:"CD-2 CDM-2 ET-1 ETM-1",pattern:"x_x_x_x_"}]}}},computed:{id:function(){return this.$vnode.key.split("-")[1]}},mounted:function(){this.$emit("input",this.value)}},S=Object(s.a)(k,w,[],!1,null,"772fe0c9",null);S.options.__file="src/Clip.vue";var T={components:{Instrument:x,Clip:S.exports},props:{value:{default:function(){return{clips:void 0,instrument:void 0,effects:{},offlineRendering:!1,idx:void 0}}}},data:function(){return{input:this.value,instrumentNames:["AMSynth","DuoSynth","FMSynth","MembraneSynth","MetalSynth","MonoSynth","NoiseSynth","PluckSynth","Synth"],effectNames:["AutoFilter","AutoPanner","AutoWah","BitCrusher","Chebyshev","Chorus","Distortion","FeedbackDelay","Freeverb","FrequencyShifter","JCReverb","Phaser","PingPongDelay","PitchShift","Reverb","StereoWidener","Tremolo","Vibrato"]}},created:function(){this.input.idx=this.value.idx||this.id},computed:{id:function(){return this.$vnode.key.split("-")[1]}},methods:{addEffect:function(e){var t=Math.floor(16777215*Math.random()).toString(16).padStart(6,"0");this.$set(this.input.effects,t,e)},removeEffect:function(e){this.$delete(this.input.effects,e)}},watch:{input:{deep:!0,handler:function(){this.$emit("input",this.input)}}}},E=(n(31),Object(s.a)(T,c,[],!1,null,"74eb68cc",null));E.options.__file="src/Channel.vue";var O=E.exports,$=n(5),C=function(){var e=this.$createElement;return(this._self._c||e)("VueP5",{on:{setup:this.setup,draw:this.draw}})};C._withStripped=!0;var j=n(17),R={components:{VueP5:n.n(j).a},data:function(){return{mic:void 0,analyzer:void 0,fft:void 0,meter:void 0}},methods:{setup:function(e){e.createCanvas(260,50),e.frameRate(20),this.analyzer=new Tone.Waveform(2048),this.fft=new Tone.FFT(1024),Tone.Destination.connect(this.analyzer),Tone.Destination.connect(this.fft),e.noFill()},draw:function(e){e.background(255);var t=this.analyzer.getValue(),n=this.fft.getValue();e.noStroke(),e.fill("rgba(0, 100, 255, 0.3)"),e.beginShape(),e.vertex(0,50);for(var i=0;i<n.length;i++)e.vertex(e.map(e.log(i),0,e.log(n.length),0,260),e.map(n[i],-127,0,50,0));e.vertex(260,50),e.endShape(),e.noFill(),e.stroke("rgba(0, 100, 255, 0.7)"),e.strokeWeight(1.5),e.beginShape();for(var r=0,a=0,o=0;o<t.length;o++)t[o]>0&&t[o-1]<=0&&0==r&&(r=1,a=o),1==r&&e.vertex(e.map(o-a,0,t.length,0,338),e.map(t[o],-1,1,50,0));if(0==r)for(o=0;o<t.length;o++)e.vertex(e.map(o,0,t.length,0,338),e.map(t[o],-1,1,50,0));e.endShape()}}},A=Object(s.a)(R,C,[],!1,null,null,null);A.options.__file="src/Oscilloscope.vue";var M=A.exports,F=function(){var e=this.$createElement,t=this._self._c||e;return t("div",[t("input",{attrs:{type:"file",id:"file",multiple:""},on:{change:this.loadJson}}),this._v(" "),t("button",{on:{click:this.saveJson}},[this._v("\n    Save JSON\n  ")])])};F._withStripped=!0;var I=n(18),N={props:["value"],methods:{saveJson:function(){var e=JSON.stringify(this.value,null,2),t=new Blob([e],{type:"text/plain;charset=utf-8"});Object(I.saveAs)(t,"scribbletune-maker-save.json")},loadJson:function(e){var t=this,n=new FileReader;n.onload=function(e){var n=JSON.parse(e.target.result);t.$emit("input",n)};for(var i=e.target.files,r=0;r<i.length;r++)n.readAsText(i[r])}}},L=Object(s.a)(N,F,[],!1,null,null,null);L.options.__file="src/SaveLoadJson.vue";var V=L.exports,D=function(){var e=this,t=e.$createElement;return(e._self._c||t)("ParamsEditor",{key:"play-pattern",attrs:{value:e.value,height:"100px"},on:{input:function(t){return e.$emit("input",t)}}})};D._withStripped=!0;var J={components:{ParamsEditor:g},props:{value:{default:[]}},mounted:function(){this.$emit("input",this.value)}},z=Object(s.a)(J,D,[],!1,null,"77d6af5a",null);z.options.__file="src/PlayPattern.vue";var B=z.exports;function U(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],i=!0,r=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(i=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);i=!0);}catch(e){r=!0,a=e}finally{try{i||null==s.return||s.return()}finally{if(r)throw a}}return n}(e,t)||H(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function W(e){return function(e){if(Array.isArray(e))return Y(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||H(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function H(e,t){if(e){if("string"==typeof e)return Y(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Y(e,t):void 0}}function Y(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function q(){return Math.floor(16777215*Math.random()).toString(16).padStart(6,"0")}$.addChord(["1P","5P","8P","12P"],[],"D"),$.addChord(["1P","5P","8P","10M","12P"],[],"DM"),$.addChord(["1P","5P","8P","12P","15P","19P"],[],"T"),$.addChord(["1P","5P","8P","12P","15P","17M","19P"],[],"TM");var G={components:{PlayPauseButton:u,Channel:O,Oscilloscope:M,SaveLoadJson:V,PlayPattern:B},data:function(){return{channels:{},toneInstruments:{},toneEffects:{},session:void 0,isPlaying:!1,isPlayPattern:!1,rowNumberToPlay:0,isRendering:!1,autoreplay:!1,playPatternId:q(),playPattern:{clipDuration:"2:0:0",channelPatterns:[]}}},computed:{scribbletuneMakerSession:{get:function(){return{channels:Object.values(this.channels),playPattern:this.playPattern}},set:function(e){this.channels={},e.channels.forEach(this.addChannel),this.playPattern=e.playPattern}},watchPropsForSessionRebuild:function(){return Object.values(this.channels).filter((function(e){return e})).map((function(e){var t,n;return{instrumentName:null==e||null===(t=e.instrument)||void 0===t?void 0:t.name,effectNames:(null==e?void 0:e.effects)?Object.values(e.effects).map((function(e){return null==e?void 0:e.name})):void 0,clips:null==e?void 0:e.clips,offlineRendering:null==e?void 0:e.offlineRendering,idx:null==e?void 0:e.idx,instrumentParams:(null==e?void 0:e.offlineRendering)?null==e||null===(n=e.instrument)||void 0===n?void 0:n.params:void 0,effectParams:(null==e?void 0:e.offlineRendering)&&(null==e?void 0:e.effects)?Object.values(e.effects).map((function(e){return null==e?void 0:e.params})):void 0}}))},channelsIdx:function(){return W(new Set(Object.values(this.channels).filter((function(e){return e})).map((function(e){return e.idx}))))},watchInstrumentParamsForUpdate:function(){return Object.values(this.channels).map((function(e){var t;return(null==e?void 0:e.offlineRendering)||null==e||null===(t=e.instrument)||void 0===t?void 0:t.params}))},watchEffectParamsForUpdate:function(){return Object.values(this.channels).map((function(e){return!(null==e?void 0:e.offlineRendering)&&(null==e?void 0:e.effects)?void 0:(null==e?void 0:e.effects)?Object.values(e.effects).map((function(e){return null==e?void 0:e.params})):void 0}))},watchPlayParams:function(){return this.isPlayPattern?this.playPattern:this.rowNumberToPlay}},methods:{createToneTransport:function(){this.session.channels.forEach((function(e){return e.clips.filter((function(e){return"Player"===e.name})).forEach((function(e){return e.unsync().sync()}))})),this.isPlayPattern?this.session.play(this.playPattern):this.session.startRow(this.rowNumberToPlay)},cancelToneTransport:function(){this.isPlaying=!1,this.tonePlayPause(),Tone.Transport.cancel(),Tone.Transport.stop()},tonePlayPause:function(){this.isPlaying?Tone.Transport.start():Tone.Transport.pause()},addChannel:function(e){var t=q();this.$set(this.channels,t,e)},removeChannel:function(e){this.$delete(this.channels,e)},createToneEffects:function(e,t){var n=this;function i(e,t){return this.toneEffects[t]=new Tone[e],this.toneEffects[t]}return(null==t?void 0:t.effects)?Object.entries(t.effects).map((function(t){var r=U(t,2),a=r[0],o=r[1];return o?i.bind(n)(o.name,"".concat(e,"-").concat(a)):void 0})).filter((function(e){return e})):void 0},createChannel:function(e){var t,n=this,i=U(e,2),r=i[0],a=i[1];if((null==a||null===(t=a.instrument)||void 0===t?void 0:t.name)&&(null==a?void 0:a.clips)){this.toneInstruments[r]=new Tone.PolySynth(Tone[a.instrument.name]),this.updateToneInstrumentsParams();var o=this.createToneEffects(r,a);this.updateToneEffectsParams(),a.offlineRendering&&(this.isRendering=!0);var s={idx:a.idx||r,instrument:this.toneInstruments[r],clips:a.clips,offlineRendering:a.offlineRendering,offlineRenderingCallback:function(){n.isRendering=!1},effects:o||[]};this.session.createChannel(s)}},createSession:function(){this.cancelToneTransport(),this.session=new $.Session,this.toneInstruments={},this.toneEffects={},Object.entries(this.channels).forEach(this.createChannel),this.createToneTransport()},updateToneInstrumentsParams:function(){var e=this;Object.entries(this.channels).forEach((function(t){var n,i=U(t,2),r=i[0],a=i[1];(null==a||null===(n=a.instrument)||void 0===n?void 0:n.params)&&e.toneInstruments[r]&&e.toneInstruments[r].set(a.instrument.params)}))},updateToneEffectsParams:function(){var e=this;Object.entries(this.channels).forEach((function(t){var n=U(t,2),i=n[0],r=n[1];r&&Object.entries(r.effects).forEach((function(t){var n=U(t,2),r=n[0],a=n[1],o="".concat(i,"-").concat(r);(null==a?void 0:a.params)&&e.toneEffects[o]&&e.toneEffects[o].set(a.params)}))}))},updatePlayPattern:function(){var e=this;this.$set(this.playPattern,"channelPatterns",this.playPattern.channelPatterns.filter((function(t){return e.channelsIdx.includes(t.channelIdx)}))),this.channelsIdx.filter((function(t){return!e.playPattern.channelPatterns.map((function(e){return e.channelIdx})).includes(t)})).forEach((function(t){return e.playPattern.channelPatterns.push({channelIdx:t,pattern:"0___"})})),this.playPatternId=q()}},watch:{watchPropsForSessionRebuild:{deep:!0,handler:function(){this.createSession()}},watchInstrumentParamsForUpdate:{deep:!0,handler:function(){this.updateToneInstrumentsParams()}},watchEffectParamsForUpdate:{deep:!0,handler:function(){this.updateToneEffectsParams()}},isPlaying:function(){this.tonePlayPause()},isRendering:function(){!this.isRendering&&this.autoreplay&&(this.isPlaying=!0)},watchPlayParams:{deep:!0,handler:function(){this.createSession()}},channelsIdx:function(){this.updatePlayPattern()}}},K=(n(34),Object(s.a)(G,r,[],!1,null,null,null));K.options.__file="src/App.vue";var Q=K.exports;new i.a({el:"#app",render:function(e){return e(Q)}})}]);